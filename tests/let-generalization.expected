
Desugared:

	(Let
	 (f (App ((Fix Let) (Lam (f (Lam (x (Var x)))))))
	  (App
	   ((Fix Record)
	    (Lam
	     ($0
	      (App
	       ((App
	         ((Update (Value a))
	          (App
	           ((App ((Update (Value b)) EmptyRecord))
	            (App ((Var f) (App ((Lam (x (Ctor (Ok (Var x))))) EmptyRecord))))))))
	        (App ((Var f) (Lam (y (Var y)))))))))))))

inferred type:

	(Quant
	 (() All a
	  (Quant
	   (() All b
	    (Quant
	     (() All c
	      (Quant
	       (() All d
	        (Record (r_info ()) (r_types (() () (d)))
	         (r_values
	          (()
	           ((a (Fn (() (Var (() c)) (Var (() c)))))
	            (b
	             (Union
	              (()
	               ((Ok
	                 (Record (r_info ()) (r_types (() () (b)))
	                  (r_values (() () ())))))
	               (a)))))
	           ())))))))))))

Runtime term:

	(App
	 ((Lam
	   (0 ()
	    (App
	     ((Fix Record)
	      (Lam
	       (1 ()
	        (Record
	         ((a (App ((Var 1) (Lam (0 () (Var 0))))))
	          (b
	           (App
	            ((Var 1) (App ((Lam (0 () (Ctor (Ok (Var 0))))) (Record ()))))))))))))))
	  (App ((Fix Let) (Lam (0 () (Lam (0 () (Var 0)))))))))

Evaluated:

	(Record ((a (Lam (0 () (Var 0)))) (b (Ctor (Ok (Record ()))))))
