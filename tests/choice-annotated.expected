
Desugared:

	(Lam
	 ($0
	  (Let
	   (choice
	    (App
	     ((WithType
	       (Quant
	        (() All a Unknown
	         (Fn (() (Var (() a)) (Fn (() (Var (() a)) (Var (() a)))))))))
	      (Var $0)))
	    (App
	     ((Fix Record)
	      (Lam
	       ($1
	        (App
	         ((App
	           ((Update x)
	            (App
	             ((App ((Update y) EmptyRecord))
	              (App
	               ((App ((Var choice) (Lam (x (Var x))))) (Lam (x (Var x)))))))))
	          (App ((App ((Var choice) EmptyRecord)) EmptyRecord))))))))))))

inferred type:

	(Fn
	 (() (Fn (() (Var (() a)) (Fn (() (Var (() a)) (Var (() a))))))
	  (Record (r_info ()) (r_types (() () (b)))
	   (r_values
	    (()
	     ((x (Record (r_info ()) (r_types (() () (c))) (r_values (() () ()))))
	      (y (Fn (() (Var (() d)) (Var (() d))))))
	     ())))))

Runtime term:

	(Lam
	 (0 ()
	  (App
	   ((Lam
	     (0 ()
	      (App
	       ((Fix Record)
	        (Lam
	         (1 ()
	          (Record
	           ((x (App ((App ((Var 1) (Record ()))) (Record ()))))
	            (y
	             (App
	              ((App ((Var 1) (Lam (0 () (Var 0))))) (Lam (0 () (Var 0))))))))))))))
	    (Var 0)))))

Evaluated:

	(Lam
	 (0 ()
	  (App
	   ((Lam
	     (0 ()
	      (App
	       ((Fix Record)
	        (Lam
	         (1 ()
	          (Record
	           ((x (App ((App ((Var 1) (Record ()))) (Record ()))))
	            (y
	             (App
	              ((App ((Var 1) (Lam (0 () (Var 0))))) (Lam (0 () (Var 0))))))))))))))
	    (Var 0)))))
