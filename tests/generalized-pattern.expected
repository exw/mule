
Desugared:

	(App
	 ((Match
	   (cases
	    ((Ok
	      ($1
	       (App
	        ((Match (cases ())
	          (default
	           ((($0)
	             (Let
	              (x
	               (App
	                ((Fix Let)
	                 (Lam
	                  (x
	                   (App
	                    ((WithType
	                      (Quant
	                       (() All a Unknown (Fn (() (Var (() a)) (Var (() a)))))))
	                     (Var $0)))))))
	               (App
	                ((Fix Record)
	                 (Lam
	                  ($2
	                   (App
	                    ((App
	                      ((Update k)
	                       (App
	                        ((App ((Update v) EmptyRecord))
	                         (App ((Var x) (Lam (y (Var y)))))))))
	                     (App ((Var x) EmptyRecord))))))))))))))
	         (Var $1)))))))
	   (default ()))
	  (App ((Lam (x (Ctor (Ok (Var x))))) (Lam (x (Var x)))))))

inferred type:

	(Record
	 (() ((k (Record (() () ()))) (v (Fn (() (Var (() a)) (Var (() a)))))) ()))

Runtime term:

	(App
	 ((Match
	   (cases
	    ((Ok
	      (Lam
	       (1 ()
	        (App
	         ((Match (cases ())
	           (default
	            ((Lam
	              (1 ()
	               (App
	                ((Lam
	                  (0 ()
	                   (App
	                    ((Fix Record)
	                     (Lam
	                      (1 ()
	                       (Record
	                        ((k (App ((Var 1) (Record ()))))
	                         (v (App ((Var 1) (Lam (0 () (Var 0))))))))))))))
	                 (App ((Fix Let) (Lam (1 () (Var 1))))))))))))
	          (Var 0))))))))
	   (default ()))
	  (App ((Lam (0 () (Ctor (Ok (Var 0))))) (Lam (0 () (Var 0)))))))

Evaluated:

	(Record ((k (Record ())) (v (Lam (0 () (Var 0))))))
